<div class="modal qsi-alert fade" id="ModalUserPassword" data-backdrop="static" data-keyboard="false">
</div>

<script type="text/javascript">
window.addEventListener('load', function () {

  $('body').on('click', '#userPasswordButton', function (e) {
    e.preventDefault();


    $form = $($(this).attr('data-form'));

    if ($form.parsley().validate()) {
      var values = {};
      $form.find('[name]').each(function() { 
        values[this.name] = $(this).val(); 
      });

      $.ajax({
        type: $form.attr('method'),
        url: $form.attr('action'),
        data: values,
        success: function (data) {
          window.location.reload();
        }
      })      
    }
  })


})
</script>




<script type="text/x-handlebars-template" id="__MODAL_USER_PASSWORD__">
<form action="/user/{{id}}" method="put"  id="userPasswordForm" autocomplete="off">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title"><%= __('Modal.User.Password') %></h3>
      </div>
      <div class="modal-body">

        <div class="form-group">
          <label for="password"><%= __('User.Password') %></label>
          <input type="password" 
                 class="form-control" 
                 id="changePassword" 
                 required=""
                 name="password"/>
        </div>

        <div class="form-group">
          <label for="password"><%= __('User.PasswordConfirm') %></label>
          <input type="password" 
                 class="form-control" 
                 data-parsley-equalto="#changePassword"
                 required=""/>
        </div>

      </div>
      <div class="modal-footer">

        <button type="button" class="btn btn-default" data-dismiss="modal"><%= __('Close') %></button>
        <button type="submit" class="btn btn-success" data-form='#userPasswordForm' id="userPasswordButton"><%= __('Save') %></button>
      </div>
    </div>
  </div>
</form>
</script>

